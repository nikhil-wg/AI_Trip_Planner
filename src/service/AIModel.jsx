import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
  systemInstruction:
    "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates,  rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates,  rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a budget-friendly 3-day Las Vegas travel plan for a couple, along with hotel options and itinerary details in JSON format:\n\n```json\n{\n  "tripDetails": {\n    "location": "Las Vegas",\n    "duration": "3 Days",\n    "budget": "Cheap",\n      "travelers": "Couple"\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$40 - $80 per night",\n     "hotelImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/27/4a/7a/10/caption.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n        "latitude": 36.1450,\n        "longitude": -115.1674\n      },\n      "rating": 3.5,\n      "description": "A classic Las Vegas hotel with a circus theme, offering affordable rooms and free attractions like circus acts. It\'s a bit further from the central Strip but easily accessible via the monorail."\n    },\n     {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$50 - $90 per night",\n      "hotelImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/20/a7/b0/29/excalibur-hotel-casino.jpg?w=700&h=-1&s=1",\n      "geoCoordinates": {\n         "latitude": 36.0982,\n         "longitude": -115.1732\n      },\n       "rating": 4.0,\n       "description": "A medieval-themed hotel with budget-friendly rooms, multiple pools, and dining options. It\'s located on the southern end of the Strip, making it a good base for exploring."\n    },\n      {\n      "hotelName": "OYO Hotel & Casino Las Vegas",\n       "hotelAddress": "115 E Tropicana Ave, Las Vegas, NV 89109",\n       "price": "$35 - $75 per night",\n       "hotelImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/26/f1/36/34/oyo-hotel-casino-las.jpg?w=700&h=-1&s=1",\n       "geoCoordinates": {\n          "latitude": 36.1008,\n          "longitude": -115.1701\n        },\n       "rating": 3.0,\n       "description": "A no-frills hotel offering basic amenities at a very affordable price. Close to the Strip and offers easy access to nearby attractions, ideal for budget travelers."\n    }\n\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the Strip & Free Attractions",\n      "bestTimeToVisit": "Morning and Evening",\n      "places": [\n        {\n          "placeName": "Bellagio Conservatory & Botanical Gardens",\n          "placeDetails": "A beautiful indoor garden display that changes with the seasons, free to visit.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Bellagio_Botanical_Gardens_Christmas_2009_1.jpg/800px-Bellagio_Botanical_Gardens_Christmas_2009_1.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1128,\n            "longitude": -115.1742\n          },\n          "ticketPricing": "Free",\n           "rating": 4.7,\n          "timeTravel": "Walk from most strip hotels (10-20 mins) or monorail"\n        },\n          {\n          "placeName": "Fountains of Bellagio",\n          "placeDetails": "Famous water fountain show with music, best seen at night but beautiful throughout the day. Check show times online.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Bellagio_fountains_IMG_0950.JPG/800px-Bellagio_fountains_IMG_0950.JPG",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1742\n           },\n            "ticketPricing": "Free",\n           "rating": 4.8,\n          "timeTravel":"Adjacent to Conservatory, no travel needed"\n        },\n        {\n          "placeName": "The LINQ Promenade",\n          "placeDetails": "Outdoor shopping, dining, and entertainment area with the High Roller observation wheel. Stroll and enjoy the vibrant atmosphere.",\n          "placeImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/22/77/25/f8/the-linq-promenade.jpg?w=700&h=-1&s=1",\n           "geoCoordinates": {\n            "latitude": 36.1166,\n            "longitude": -115.1697\n             },\n          "ticketPricing": "Free to walk around, attractions have individual costs",\n            "rating": 4.5,\n          "timeTravel": "Walk from Bellagio (15-20 mins), or take the monorail"\n        },\n\n         {\n          "placeName": "Mirage Volcano",\n          "placeDetails": "Free show, the Mirage Volcano erupts with flames and sound at night.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Mirage_Volcano_in_Las_Vegas.jpg/800px-Mirage_Volcano_in_Las_Vegas.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1205,\n            "longitude": -115.1734\n          },\n            "ticketPricing":"Free",\n           "rating":4.5,\n           "timeTravel":"Walk from the LINQ Promenade (10-15 mins)"\n        }\n\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & Fremont Street Experience",\n      "bestTimeToVisit": "Afternoon and Evening",\n      "places": [\n       {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "A pedestrian mall with a canopy of LED screens showing vibrant light shows. A must-see at night.",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Fremont_Street_Experience_at_night.jpg/800px-Fremont_Street_Experience_at_night.jpg",\n          "geoCoordinates": {\n             "latitude": 36.1704,\n            "longitude": -115.1420\n          },\n            "ticketPricing":"Free",\n           "rating":4.6,\n           "timeTravel": "Take a bus or ride-share from the Strip (20-30 mins)"\n\n        },\n        {\n          "placeName": "Container Park",\n           "placeDetails": "An outdoor shopping and entertainment complex built from shipping containers. Good for unique photos and a relaxed atmosphere.",\n           "placeImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/10/2b/02/f0/container-park.jpg?w=700&h=-1&s=1",\n           "geoCoordinates": {\n            "latitude": 36.1710,\n            "longitude": -115.1410\n          },\n           "ticketPricing": "Free to walk around",\n           "rating": 4.3,\n          "timeTravel": "Walk from Fremont Street Experience (5 mins)"\n        },\n          {\n          "placeName": "Mob Museum",\n          "placeDetails": "An interesting museum that explores the history of organized crime in the US. It has entry fees.",\n           "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Mob_Museum_entrance_Las_Vegas_2012.jpg/800px-Mob_Museum_entrance_Las_Vegas_2012.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1717,\n            "longitude": -115.1416\n          },\n           "ticketPricing":"$30 per person",\n            "rating": 4.5,\n          "timeTravel": "Walk from Container Park (5 mins)"\n        }\n      ]\n    },\n       "day3": {\n      "theme": "Exploring the Strip & Free Attractions",\n      "bestTimeToVisit": "Morning and Evening",\n      "places": [\n        {\n          "placeName": "Welcome to Fabulous Las Vegas Sign",\n          "placeDetails": "Iconic Las Vegas sign. A must for a photo opportunity.",\n           "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Las_Vegas_Welcome_Sign.jpg/800px-Las_Vegas_Welcome_Sign.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0827,\n            "longitude": -115.1726\n          },\n          "ticketPricing": "Free",\n           "rating": 4.5,\n            "timeTravel": "Bus ride or taxi/ride-share from Strip Hotels (15-20 mins)"\n        },\n        {\n          "placeName": "M&M\'s World",\n          "placeDetails": "A large retail store filled with colorful M&Ms merchandise, fun for browsing, no entry fee.",\n          "placeImageUrl": "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/13/1a/76/1d/m-m-s-world-las-vegas.jpg?w=700&h=-1&s=1",\n          "geoCoordinates": {\n            "latitude": 36.1060,\n            "longitude": -115.1717\n          },\n            "ticketPricing":"Free",\n            "rating": 4.0,\n           "timeTravel": "Walk from the Las Vegas Sign or monorail"\n        },\n         {\n          "placeName": "Coke Store",\n          "placeDetails": "Fun place for browsing, and purchasing Coke-related merchandise.",\n           "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Coca-Cola_Store_in_Las_Vegas_2023_04.jpg/800px-Coca-Cola_Store_in_Las_Vegas_2023_04.jpg",\n          "geoCoordinates": {\n             "latitude": 36.1057,\n            "longitude": -115.1717\n          },\n            "ticketPricing":"Free",\n             "rating": 4.2,\n          "timeTravel": "Adjacent to M&M\'s World, no travel needed."\n        }\n      ]\n    }\n  }\n}\n```\n**Notes for a Cheap Budget:**\n\n*   **Transportation:** Utilize the bus system (Deuce or SDX) or walk when possible. Ride-sharing can be used when needed but it increases cost. The monorail is useful for the central Strip.\n*   **Food:** Consider budget-friendly options like fast food, food court meals, or grab-and-go items from grocery stores. Take advantage of hotel promotions if they offer complimentary breakfast.\n*   **Entertainment:** Stick to free attractions and shows. Casinos are free to enter, but set a strict gambling budget or avoid gambling to save money.\n*   **Accommodation:** Consider staying slightly off-strip if it significantly reduces cost as public transport can help with location. Weekday bookings can help reduce cost compared to weekend booking.\n*   **Flexibility:** Be open to adjusting your schedule and activities based on your budget constraints and energy levels.\n\nThis JSON data should give you a detailed plan with all the necessary information. Remember to verify prices and show times closer to your travel date as they can change. Enjoy your trip to Las Vegas!\n',
        },
      ],
    },
  ],
});
